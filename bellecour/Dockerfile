FROM nethermind/nethermind:1.14.2

WORKDIR /iexec/node

# Bellecour
ADD https://raw.githubusercontent.com/iExecBlockchainComputing/poa-chain-spec/da5209062cb35f727914caa7a3ce4bdc9324c8df/spec.json spec.json
ADD https://raw.githubusercontent.com/iExecBlockchainComputing/poa-chain-spec/1b2be4dfe606dabc47d0a75a1dd4a1259818db50/bootnodes.json bootnodes.json

# Init
ENV NETHERMIND_INITCONFIG_BASEDBPATH=nethermind_db/iexec
ENV NETHERMIND_INITCONFIG_CHAINSPECPATH=/iexec/node/spec.json
ENV NETHERMIND_INITCONFIG_GENESISHASH=0xb27ad962878bee956c00cb3b483086d093eb6379cafc05c1fdcfaad02035523b
ENV NETHERMIND_INITCONFIG_ISMINING=false
ENV NETHERMIND_INITCONFIG_STATICNODESPATH=/iexec/node/bootnodes.json
#- NETHERMIND_INITCONFIG_WEBSOCKETSENABLED

# Mining
ENV NETHERMIND_MININGCONFIG_MINGASPRICE=0

# Network
ENV NETHERMIND_NETWORKCONFIG_DISCOVERYPORT=30303
ENV NETHERMIND_NETWORKCONFIG_P2PPORT=30303

# JsonRpc
ENV NETHERMIND_JSONRPCCONFIG_ENABLED=true
ENV NETHERMIND_JSONRPCCONFIG_ENABLEDMODULES=Eth,Subscribe,TxPool,Web3,Proof,Net,Parity,Health
ENV NETHERMIND_JSONRPCCONFIG_HOST=0.0.0.0
# https://localhost:8545/
ENV NETHERMIND_JSONRPCCONFIG_PORT=8545
# ws://localhost:8545/ws/json-rpc
ENV NETHERMIND_JSONRPCCONFIG_WEBSOCKETSPORT=8545

# Aura
ENV NETHERMIND_AURACONFIG_FORCESEALING=true

# Sync
ENV NETHERMIND_SYNCCONFIG_USEGETHLIMITSINFASTBLOCKS=false
ENV NETHERMIND_SYNCCONFIG_SNAPSYNC=false
ENV NETHERMIND_SYNCCONFIG_FASTSYNC=false
ENV NETHERMIND_SYNCCONFIG_FASTBLOCKS=false
ENV NETHERMIND_SYNCCONFIG_PIVOTNUMBER=10000000
ENV NETHERMIND_SYNCCONFIG_PIVOTHASH=0x54dcd90d8232c4e1b3d494838785eaac309e737931c8d5f1e80c761c4483fd98
ENV NETHERMIND_SYNCCONFIG_PIVOTTOTALDIFFICULTY=3402823669209384634633746074317682114225963155
ENV NETHERMIND_SYNCCONFIG_DOWNLOADRECEIPTSINFASTSYNC=false
ENV NETHERMIND_SYNCCONFIG_DOWNLOADBODIESINFASTSYNC=false

# Ethstats
ENV NETHERMIND_ETHSTATSCONFIG_ENABLED=
ENV NETHERMIND_ETHSTATSCONFIG_NAME=
ENV NETHERMIND_ETHSTATSCONFIG_SERVER=
ENV NETHERMIND_ETHSTATSCONFIG_SECRET=

ENTRYPOINT [ "/nethermind/Nethermind.Runner" ]
# CMD [ "--log", "DEBUG" ]
